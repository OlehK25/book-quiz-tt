# HOLYWATER Quiz Funnel üíß

Production-ready –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Å—ñ–π–Ω–æ—ó –≤–æ—Ä–æ–Ω–∫–∏ –∑ –∫–≤—ñ–∑–æ–º, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ —Å—É—á–∞—Å–Ω–∏—Ö –≤–µ–±-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞—Ö. –¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—ó –≤–æ—Ä–æ–Ω–∫–∏ –∑–∞–ª—É—á–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**, **–ë–µ–∑–ø–µ–∫—É** —Ç–∞ **–î–æ—Å–≤—ñ–¥ –†–æ–∑—Ä–æ–±–Ω–∏–∫–∞**.

## üéØ –û–≥–ª—è–¥ –ü—Ä–æ—î–∫—Ç—É

–ö–≤—ñ–∑ —ñ–∑ 5 –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –ø–∏—Ç–∞–Ω–Ω—è–º–∏, –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º –∑–±–æ—Ä–æ–º –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π, –∑–±–æ—Ä–æ–º email —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç–æ–º —É CSV.

### –ö–ª—é—á–æ–≤—ñ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- üåç **–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è**: 4 –º–æ–≤–∏ (EN, FR, DE, ES) –∑ —Ä–æ—É—Ç–∏–Ω–≥–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ URL
- üîí **–ü—ñ–¥—Ö—ñ–¥ –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º –±–µ–∑–ø–µ–∫–∏**: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ AES-GCM —Ç–∞ Web Crypto API
- üíæ **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É**: –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ—á–∏—â–µ–Ω–Ω—è–º —á–µ—Ä–µ–∑ 7 –¥–Ω—ñ–≤
- üìä **–ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö**: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSV –∑ –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–º–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏
- üé® **–ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω**: –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ –±–∞–∑–æ–≤–∞–Ω–∞ —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫–∞ –±–µ–∑ —Å—Ç—Ä–∏–±–∫—ñ–≤ —Ä–æ–∑–º—ñ—Ç–∫–∏
- ‚ö° **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä React 19 + —Å–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ + Turbopack
- üß™ **–ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏**: –ú–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏ (Jest) + –Ω–∞—Å–∫—Ä—ñ–∑–Ω—ñ —Ç–µ—Å—Ç–∏ (Playwright)

---

## üìë –ù–∞–≤—ñ–≥–∞—Ü—ñ—è

### üéØ –ì–æ–ª–æ–≤–Ω—ñ –†–æ–∑–¥—ñ–ª–∏
- [üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç](#-—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç) - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫
- [üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –°—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π-—Å—Ç–µ–∫) - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó
- [üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ—î–∫—Ç—É) - –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤
- [üß™ –ü—ñ–¥—Ö—ñ–¥ –¥–æ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#-–ø—ñ–¥—Ö—ñ–¥-–¥–æ-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è) - Unit —Ç–∞ E2E —Ç–µ—Å—Ç–∏
- [üìù –î–ª—è –†–µ–≤'—é–≤–µ—Ä—ñ–≤](#-–¥–ª—è-—Ä–µ–≤—é–≤–µ—Ä—ñ–≤) - –ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

### üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ
- [üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ü—Ä–æ—î–∫—Ç–Ω—ñ –†—ñ—à–µ–Ω–Ω—è](#-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞-—Ç–∞-–ø—Ä–æ—î–∫—Ç–Ω—ñ-—Ä—ñ—à–µ–Ω–Ω—è) - URL —Ä–æ—É—Ç–∏–Ω–≥, –ø–ª–∞–≤–Ω–∞ —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫–∞, —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
- [‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ](#-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó-–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ) - React 19, —Å–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, GPU-–∞–Ω—ñ–º–∞—Ü—ñ—ó
- [üîí –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–µ–∑–ø–µ–∫–∏](#-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–±–µ–∑–ø–µ–∫–∏) - –®–∞—Ä–∏ –∑–∞—Ö–∏—Å—Ç—É, security headers
- [üîê –ë–µ–∑–ø–µ–∫–∞](#-–±–µ–∑–ø–µ–∫–∞) - –°—Ç—Ä–∞—Ç–µ–≥—ñ—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è AES-GCM
- [üé® –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –î–∏–∑–∞–π–Ω—É](#-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–¥–∏–∑–∞–π–Ω—É) - Fluid —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫–∞, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- [üìä –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü–æ—Ç–æ–∫—É –î–∞–Ω–∏—Ö](#-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞-–ø–æ—Ç–æ–∫—É-–¥–∞–Ω–∏—Ö) - –î—ñ–∞–≥—Ä–∞–º–∞ —Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- [üí° –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω—ñ Best Practices](#-–≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω—ñ-best-practices) - Server-first, –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å, i18n
- [‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –§–∞–π–ª–∏](#-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ-—Ñ–∞–π–ª–∏) - –û–ø–∏—Å –∫–æ–Ω—Ñ—ñ–≥—ñ–≤

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –°—Ç–µ–∫

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è |
|----------|------------|-----------|
| **Framework** | Next.js 16 (App Router) | –°–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –≤–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–æ—É—Ç–∏–Ω–≥ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è, –æ–ø—Ç–∏–º–∞–ª—å–Ω–µ SEO |
| **Build Tool** | Turbopack | –£ 700—Ö —à–≤–∏–¥—à–µ –∑–∞ Webpack, –º–∏—Ç—Ç—î–≤–∞ –≥–∞—Ä—è—á–∞ –∑–∞–º—ñ–Ω–∞ –º–æ–¥—É–ª—ñ–≤ |
| **Runtime** | React 19.2 | –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞, –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –≥—ñ–¥—Ä–∞—Ü—ñ—è |
| **State** | Zustand + Persist | –õ–µ–≥–∫–∏–π (1KB), –≤–±—É–¥–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑—ñ —Å—Ö–æ–≤–∏—â–µ–º –±—Ä–∞—É–∑–µ—Ä–∞ |
| **Styling** | Tailwind CSS v4 | –ù–æ–≤–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ `@theme`, CSS –±–µ–∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ —Ä–∞–Ω—Ç–∞–π–º—ñ |
| **Validation** | Zod |  –í–∞–ª—ñ–¥–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ React Hook Form |
| **i18n** | next-intl | –°–µ—Ä–≤–µ—Ä–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏ |
| **Testing** | Jest + Playwright | –ú–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ª–æ–≥—ñ–∫–∏, –Ω–∞—Å–∫—Ä—ñ–∑–Ω—ñ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ |
| **Type Safety** | TypeScript 5 | –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º, –∫–æ–º–ø–ª–µ–∫—Å–Ω—ñ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ |

---

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ü—Ä–æ—î–∫—Ç–Ω—ñ –†—ñ—à–µ–Ω–Ω—è

### 1. URL —è–∫ –Ñ–¥–∏–Ω–µ –î–∂–µ—Ä–µ–ª–æ –ü—Ä–∞–≤–¥–∏
**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–∞–Ω –∫–≤—ñ–∑—É –∫–µ—Ä—É—î—Ç—å—Å—è URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (`/[locale]/quiz/[step]`), –∞ Zustand –≤–∏—Å—Ç—É–ø–∞—î —è–∫ —à–∞—Ä –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.

**–ß–æ–º—É**:
- ‚úÖ **–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –∫–æ–ø—ñ—é–≤–∞—Ç–∏/–≤—Å—Ç–∞–≤–ª—è—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –∑ –ø—Ä–æ–≥—Ä–µ—Å–æ–º
- ‚úÖ **–Ü—Å—Ç–æ—Ä—ñ—è –±—Ä–∞—É–∑–µ—Ä–∞**: –ù–∞—Ç–∏–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥ –ø—Ä–∞—Ü—é—î –±–µ–∑–ø–µ—Ä–µ–±—ñ–π–Ω–æ
- ‚úÖ **SEO-–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π**: –ö–æ–∂–µ–Ω –∫—Ä–æ–∫ - —Ü–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π, —ñ–Ω–¥–µ–∫—Å–æ–≤–∞–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç
- ‚úÖ **–ß—ñ—Ç–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—É**: URL –∑–∞–≤–∂–¥–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø–æ—Ç–æ—á–Ω—É –ø–æ–∑–∏—Ü—ñ—é —É –∫–≤—ñ–∑—ñ

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
```typescript
// –ü–∞—Ç–µ—Ä–Ω –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó: /en/quiz/2 ‚Üí –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 2 –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é
// –†–æ—É—Ç–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—é—î –ø–æ—Ç—ñ–∫, —Å—Ö–æ–≤–∏—â–µ –∫–µ—à—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
const stepNumber = parseInt(params.step, 10);
useQuizStore.initSession(locale);
```

### 2. –ü–ª–∞–≤–Ω–∞ –¢–∏–ø–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∞ –°–∏—Å—Ç–µ–º–∞
**–†—ñ—à–µ–Ω–Ω—è**: –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ CSS `clamp()` –∑ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–º –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ–±–ª–∞—Å—Ç—ñ –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–∞–º—ñ—Å—Ç—å —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏—Ö —Ç–æ—á–æ–∫.

**–ß–æ–º—É**:
- ‚úÖ **–ù—É–ª—å–æ–≤–∏–π CLS**: –í—ñ–¥—Å—É—Ç–Ω—ñ —Å—Ç—Ä–∏–±–∫–∏ —Ä–æ–∑–º—ñ—Ç–∫–∏ –º—ñ–∂ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–º–∏ —Ç–æ—á–∫–∞–º–∏ (–∫—Ä–∞—â—ñ Core Web Vitals)
- ‚úÖ **Fluid –∞–¥–∞–ø—Ç–∏–≤**: –ü–ª–∞–≤–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –Ω–∞ –í–°–Ü–• —à–∏—Ä–∏–Ω–∞—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
- ‚úÖ **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –ù–µ –ø–æ—Ç—Ä–µ–±—É—î JavaScript, —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω—ñ GPU
- ‚úÖ **–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É —à—Ä–∏—Ñ—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–§–æ—Ä–º—É–ª–∞**:
```css
/* –ú–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –≤—ñ–¥ 320px (mobile) ‚Üí 768px (desktop), –ø–æ—Ç—ñ–º clamp */
--fs-heading-lg: clamp(1.25rem, calc(0.714rem + 2.678vw), 2rem);
/*                     ‚Üë min      ‚Üë intercept + slope   ‚Üë max  */
```

–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ 8 —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ —à—Ä–∏—Ñ—Ç—É (display-xl ‚Üí body-sm) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ª—ñ–Ω—ñ–π–Ω–æ—ó —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—ó.

### 3. –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞ –ö–ª—ñ—î–Ω—Ç—ñ (AES-GCM)
**–†—ñ—à–µ–Ω–Ω—è**: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è email –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —É –ª–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ —á–µ—Ä–µ–∑ Web Crypto API.

**–ß–æ–º—É**:
- ‚úÖ **–ù—É–ª—å–æ–≤–∞ –¥–æ–≤—ñ—Ä–∞ –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞**: –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ
- ‚úÖ **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø—ñ–¥–º—ñ–Ω–∏**: –†–µ–∂–∏–º GCM –≤–∫–ª—é—á–∞—î –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é (–≤–∏—è–≤–ª—è—î —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è)
- ‚úÖ **–¢–∏–º—á–∞—Å–æ–≤—ñ –∫–ª—é—á—ñ**: –ö–ª—é—á—ñ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —É —Å—Ö–æ–≤–∏—â—ñ —Å–µ—Å—ñ—ó (–∑–Ω–∏—â—É—é—Ç—å—Å—è –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –≤–∫–ª–∞–¥–∫–∏)
- ‚úÖ **–ë–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**: –ù–∞—Ç–∏–≤–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è, 0KB —É –∑–±—ñ—Ä—Ü—ñ

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
```typescript
// src/lib/crypto.ts - AES-GCM –∑ 256-–±—ñ—Ç–Ω–∏–º –∫–ª—é—á–µ–º
export async function encrypt(data: string): Promise<string> {
  const key = await getSessionKey(); // –ó—ñ —Å—Ö–æ–≤–∏—â–∞ —Å–µ—Å—ñ—ó
  const iv = crypto.getRandomValues(new Uint8Array(12));
  const encrypted = await crypto.subtle.encrypt(
    { name: 'AES-GCM', iv },
    key,
    new TextEncoder().encode(data)
  );
  return base64(iv + encrypted); // IV –¥–æ–¥–∞–Ω–æ –¥–ª—è –¥–µ—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
}
```

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏** (CSP, X-Frame-Options —Ç–æ—â–æ) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤ [next.config.ts](next.config.ts#L8-L38).

### 4. –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è: –ú–æ–¥—É–ª—å–Ω—ñ + –ù–∞—Å–∫—Ä—ñ–∑–Ω—ñ
**–†—ñ—à–µ–Ω–Ω—è**: –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –∑ Jest –¥–ª—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ —Ç–∞ Playwright –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

**–ß–æ–º—É Jest**:
- ‚úÖ –®–≤–∏–¥–∫–∏–π —Ü–∏–∫–ª –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É (–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è < 2—Å)
- ‚úÖ –¢–µ—Å—Ç—É—î —á–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó: —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é CSV, –ª–æ–≥—ñ–∫—É —Å—Ö–æ–≤–∏—â–∞
- ‚úÖ –ó–≤—ñ—Ç–∏ –ø—Ä–æ –ø–æ–∫—Ä–∏—Ç—Ç—è –¥–ª—è –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

**–ß–æ–º—É Playwright**:
- ‚úÖ –¢–µ—Å—Ç—É—î —Ä–µ–∞–ª—å–Ω–∏–π —à–ª—è—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (Q1 ‚Üí Q5 ‚Üí Email ‚Üí CSV)
- ‚úÖ –õ–æ–≤–∏—Ç—å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ –±–∞–≥–∏ (—Ä–æ—É—Ç–∏–Ω–≥, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å, –∞–Ω—ñ–º–∞—Ü—ñ—ó)
- ‚úÖ –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –º—ñ–∂–±—Ä–∞—É–∑–µ—Ä–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ

**–¢–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏**:
- `src/lib/*.test.ts` - –ú–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, —Å—Ö–æ–≤–∏—â–∞, –µ–∫—Å–ø–æ—Ä—Ç—É CSV
- `tests/quiz-flow.spec.ts` - –ù–∞—Å–∫—Ä—ñ–∑–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏ (–æ—Å–Ω–æ–≤–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π + –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É)

---

## ‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### 1. React 19 Compiler
–£–≤—ñ–º–∫–Ω–µ–Ω–æ `babel-plugin-react-compiler` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ñ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:
```json
// package.json
"babel-plugin-react-compiler": "1.0.0"
```
**–í–ø–ª–∏–≤**: –£—Å—É–≤–∞—î –ø–æ—Ç—Ä–µ–±—É –≤ —Ä—É—á–Ω–∏—Ö `useMemo`/`useCallback`, ~15% —à–≤–∏–¥—à—ñ —Ä–µ–Ω–¥–µ—Ä–∏.

### 2. –°–µ—Ä–≤–µ—Ä–Ω—ñ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑–∞ –ó–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
–£—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ React, —è–∫—â–æ –Ω–µ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ `"use client"`:
- ‚úÖ –ù—É–ª—å–æ–≤–∏–π JavaScript –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (—à–≤–∏–¥—à–∞ –ø–æ—á–∞—Ç–∫–æ–≤–∞ –∑–∞–≥—Ä—É–∑–∫–∞)
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–±—ñ—Ä–∫–∏ (~40% –º–µ–Ω—à–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ)

### 3. –ü–ª–∞–≤–Ω—ñ –ê–Ω—ñ–º–∞—Ü—ñ—ó (–ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è GPU)
**Circular Loader** ([CircularLoader.tsx](src/components/features/quiz/CircularLoader.tsx)):
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SVG `stroke-dashoffset` –∞–Ω—ñ–º–∞—Ü—ñ—é (CSS transition)
- –í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –Ω–∞ GPU —á–µ—Ä–µ–∑ `transform` –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ JS —Ç–∞–π–º–µ—Ä–æ–º –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤

**Bubble Scroll** ([BubbleOptions.tsx](src/components/features/quiz/BubbleOptions.tsx)):
- –ö–∞—Å—Ç–æ–º–Ω–∞ –ø–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —á–µ—Ä–µ–∑ `requestAnimationFrame`
- –õ—ñ–Ω—ñ–π–Ω–∞ —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª—É 60fps
- –ë–ª–æ–∫—É—î –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π —Å–∫—Ä–æ–ª –¥–ª—è –ø–æ–¥—ñ–π –∫–æ–ª–µ—Å–∞

### 4. –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –ö–æ–¥—É
- –î–∏–Ω–∞–º—ñ—á–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –¥–ª—è –≤–∞–∂–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä., –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ email)
- –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ (–∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –∫–≤—ñ–∑—É - –æ–∫—Ä–µ–º–∏–π –±–ª–æ–∫)
- `next/dynamic` –¥–ª—è –≤—ñ–¥–∂–µ—Ç—ñ–≤ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞

---

## üîí –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–µ–∑–ø–µ–∫–∏

### –®–∞—Ä–∏ –ó–∞—Ö–∏—Å—Ç—É –î–∞–Ω–∏—Ö
1. **–®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (email) —à–∏—Ñ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ AES-GCM –ø–µ—Ä–µ–¥ –ª–æ–∫–∞–ª—å–Ω–∏–º —Å—Ö–æ–≤–∏—â–µ–º
2. **TTL**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ 7 –¥–Ω—ñ–≤ (–∑–∞–ø–æ–±—ñ–≥–∞—î –≤–∏—Ç–æ–∫—É –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –¥–∞–Ω–∏—Ö)
3. **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: CSP –±–ª–æ–∫—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏, X-Frame-Options –∑–∞–ø–æ–±—ñ–≥–∞—î clickjacking
4. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: –°—Ö–µ–º–∏ Zod –≤–∞–ª—ñ–¥—É—é—Ç—å –≤—Å—ñ –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (email, ID –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)

### Security Headers ([next.config.ts](next.config.ts))
```typescript
headers: [
  {
    key: 'Content-Security-Policy',
    value: "default-src 'self'; script-src 'self' 'unsafe-eval'..."
  },
  { key: 'X-Frame-Options', value: 'DENY' },
  { key: 'X-Content-Type-Options', value: 'nosniff' },
  // ... –ø–æ–≤–Ω–∞ CSP –ø–æ–ª—ñ—Ç–∏–∫–∞
]
```

---

## üß™ –ü—ñ–¥—Ö—ñ–¥ –¥–æ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Unit –¢–µ—Å—Ç–∏ (Jest)
**–ü–æ–∫—Ä–∏—Ç—Ç—è**: Crypto —É—Ç–∏–ª—ñ—Ç–∏, –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è storage, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è CSV
```bash
npm test                # –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ unit —Ç–µ—Å—Ç–∏
npm run test:watch      # Watch mode –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
```

**–ü—Ä–∏–∫–ª–∞–¥** ([storage.test.ts](src/lib/storage.test.ts)):
```typescript
it('should expire data after TTL', async () => {
  await setSecure('key', 'value', { ttl: 100 });
  await sleep(150);
  expect(await getSecure('key')).toBeNull();
});
```

### E2E –¢–µ—Å—Ç–∏ (Playwright)
**–ü–æ–∫—Ä–∏—Ç—Ç—è**: –ü–æ–≤–Ω–∞ –≤–æ—Ä–æ–Ω–∫–∞ –∫–≤—ñ–∑—É (5 –ø–∏—Ç–∞–Ω—å ‚Üí loader ‚Üí email ‚Üí thank you)
```bash
npm run test:e2e        # –ó–∞–ø—É—Å–∫ Playwright —Ç–µ—Å—Ç—ñ–≤
```

**–ö—Ä–∏—Ç–∏—á–Ω—ñ –°—Ü–µ–Ω–∞—Ä—ñ—ó**:
- ‚úÖ –û—Å–Ω–æ–≤–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π (–≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –≤—Å—ñ –ø–∏—Ç–∞–Ω–Ω—è, –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ email, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSV)
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å (–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–≤—ñ–∑—É, —Å—Ç–∞–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è)
- ‚úÖ –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è (–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º–æ–≤, –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è)

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É

```
quiz-holywater-tt/
‚îú‚îÄ‚îÄ app/                           # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ globals.css                # –ü–ª–∞–≤–Ω–∞ —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ + —Ç–æ–∫–µ–Ω–∏ —Ç–µ–º–∏ Tailwind v4
‚îÇ   ‚îî‚îÄ‚îÄ [locale]/                  # –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è (en, fr, de, es)
‚îÇ       ‚îú‚îÄ‚îÄ layout.tsx             # –ö–æ—Ä–µ–Ω–µ–≤–∏–π layout –∑ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–æ–º —ñ–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx               # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /quiz/1)
‚îÇ       ‚îú‚îÄ‚îÄ not-found.tsx          # –ö–∞—Å—Ç–æ–º–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ 404
‚îÇ       ‚îú‚îÄ‚îÄ [...rest]/             # Catch-all –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –Ω–µ–≤—ñ–¥–æ–º–∏—Ö URL
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ       ‚îî‚îÄ‚îÄ quiz/                  # –í–æ—Ä–æ–Ω–∫–∞ –∫–≤—ñ–∑—É
‚îÇ           ‚îú‚îÄ‚îÄ layout.tsx         # Layout –¥–ª—è –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∫–≤—ñ–∑—É
‚îÇ           ‚îú‚îÄ‚îÄ [step]/            # –î–∏–Ω–∞–º—ñ—á–Ω—ñ –∫—Ä–æ–∫–∏ –∫–≤—ñ–∑—É (1-5)
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–∏—Ç–∞–Ω–Ω—è –∑–∞ –Ω–æ–º–µ—Ä–æ–º –∫—Ä–æ–∫—É
‚îÇ           ‚îú‚îÄ‚îÄ loading/           # –ü—Ä–æ–º—ñ–∂–Ω–∏–π –µ–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # 5-—Å–µ–∫—É–Ω–¥–Ω–∏–π —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∏–π loader
‚îÇ           ‚îú‚îÄ‚îÄ email/             # –ó–±—ñ—Ä email –∞–¥—Ä–µ—Å–∏
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # –§–æ—Ä–º–∞ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é Zod
‚îÇ           ‚îî‚îÄ‚îÄ thank-you/         # –§—ñ–Ω–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ               ‚îî‚îÄ‚îÄ page.tsx       # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSV + –∫–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locale-selector/   # –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts       # Barrel export
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LocaleSelector.tsx  # Dropdown –∑ –ø—Ä–∞–ø–æ—Ä—Ü—è–º–∏ –∫—Ä–∞—ó–Ω
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quiz/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è –∫–≤—ñ–∑—É
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ BubbleOptions.tsx        # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∑ –ø–ª–∞–≤–Ω–æ—é –∞–Ω—ñ–º–∞—Ü—ñ—î—é
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CircularLoader.tsx       # SVG loader –∑ –≤—ñ–¥—Å–æ—Ç–∫–∞–º–∏ (GPU-accelerated)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Header.tsx               # –•–µ–¥–µ—Ä –∫–≤—ñ–∑—É –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ HydrationGuard.tsx       # –ó–∞–ø–æ–±—ñ–≥–∞—î mismatch —Å–µ—Ä–≤–µ—Ä—É/–∫–ª—ñ—î–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Loader.tsx               # –°–∫–µ–ª–µ—Ç–æ–Ω loader –¥–ª—è –ø–∏—Ç–∞–Ω—å
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MultipleSelectOptions.tsx  # –ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä (checkbox)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ProgressBar.tsx          # –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—É (1/5, 2/5...)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QuestionRenderer.tsx     # –†–æ—É—Ç–µ—Ä —Ç–∏–ø—ñ–≤ –ø–∏—Ç–∞–Ω—å
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QuestionTitle.tsx        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∏—Ç–∞–Ω–Ω—è –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ QuizInitializer.tsx      # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Zustand store
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ SingleSelectOptions.tsx  # –û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä (radio)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                    # –ü–µ—Ä–µ—ñ—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–∏ (shadcn-–ø–æ–¥—ñ–±–Ω—ñ)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx         # –ö–∞—Å—Ç–æ–º—ñ–∑–æ–≤–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∑ –≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Card.tsx           # –û–±–≥–æ—Ä—Ç–∫–∞ –∫–∞—Ä—Ç–æ–∫
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Input.tsx          # –ü–æ–ª–µ –≤–≤–æ–¥—É –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quiz-questions.json    # –ë–∞–∑–∞ –ø–∏—Ç–∞–Ω—å (5 –ø–∏—Ç–∞–Ω—å √ó 4 –º–æ–≤–∏)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ i18n/                      # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–≥–∞—Ç–æ–º–æ–≤–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request.ts             # Middleware –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ª–æ–∫–∞–ª—ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routing.ts             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó (locales, defaultLocale)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto.ts              # AES-GCM —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Web Crypto API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.ts             # –û–±–≥–æ—Ä—Ç–∫–∞ localStorage –∑ TTL —Ç–∞ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.test.ts        # Unit —Ç–µ—Å—Ç–∏ –¥–ª—è storage —É—Ç–∏–ª—ñ—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quiz-data.ts           # –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á —Ç–∞ –ø–∞—Ä—Å–µ—Ä quiz-questions.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quiz-data.test.ts      # –¢–µ—Å—Ç–∏ –¥–ª—è –ª–æ–≥—ñ–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∏—Ç–∞–Ω—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useQuizStore.ts    # Zustand store + persist middleware
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ csv-export.ts      # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è CSV –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ csv-export.test.ts # –¢–µ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è CSV
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.ts           # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏ (cn, formatters, —Ç–æ—â–æ)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îú‚îÄ‚îÄ index.ts               # –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –ø—Ä–æ—î–∫—Ç—É
‚îÇ       ‚îî‚îÄ‚îÄ quiz.ts                # –¢–∏–ø–∏ –¥–ª—è –ø–∏—Ç–∞–Ω—å, –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π, —Å—Ç–∞–Ω—É –∫–≤—ñ–∑—É
‚îÇ
‚îú‚îÄ‚îÄ messages/                      # JSON —Ñ–∞–π–ª–∏ i18n –ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ en.json                    # –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ fr.json                    # –§—Ä–∞–Ω—Ü—É–∑—å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ de.json                    # –ù—ñ–º–µ—Ü—å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ es.json                    # –Ü—Å–ø–∞–Ω—Å—å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ public/                        # –°—Ç–∞—Ç–∏—á–Ω—ñ assets (favicon, images)
‚îÇ
‚îú‚îÄ‚îÄ tests/                         # E2E —Ç–µ—Å—Ç–∏ (Playwright)
‚îÇ   ‚îî‚îÄ‚îÄ quiz-flow.spec.ts          # –û—Å–Ω–æ–≤–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π + –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å
‚îÇ
‚îú‚îÄ‚îÄ test-results/                  # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ Playwright (—Å–∫—Ä—ñ–Ω—à–æ—Ç–∏, traces)
‚îÇ   ‚îî‚îÄ‚îÄ quiz-flow-Quiz-Conversion--ddb92-te-Quiz---Email---Thank-You-chromium/
‚îÇ       ‚îî‚îÄ‚îÄ error-context.md
‚îÇ
‚îú‚îÄ‚îÄ playwright-report/             # HTML –∑–≤—ñ—Ç–∏ Playwright
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îî‚îÄ‚îÄ 4d571b530cad97825afebdfac99e98f4c4b02378.md
‚îÇ
‚îú‚îÄ‚îÄ eslint.config.mjs              # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è ESLint (flat config)
‚îú‚îÄ‚îÄ i18n.ts                        # –ì–ª–æ–±–∞–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è next-intl
‚îú‚îÄ‚îÄ jest.config.js                 # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Jest –¥–ª—è unit —Ç–µ—Å—Ç—ñ–≤
‚îú‚îÄ‚îÄ jest.setup.ts                  # –ì–ª–æ–±–∞–ª—å–Ω—ñ –º–æ–∫–∏ —Ç–∞ setup –¥–ª—è Jest
‚îú‚îÄ‚îÄ next.config.ts                 # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Next.js (security headers, i18n plugin)
‚îú‚îÄ‚îÄ next-env.d.ts                  # TypeScript —Ç–∏–ø–∏ Next.js (auto-generated)
‚îú‚îÄ‚îÄ package.json                   # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ npm scripts
‚îú‚îÄ‚îÄ playwright.config.ts           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Playwright (–±—Ä–∞—É–∑–µ—Ä–∏, –ø–æ–≤—Ç–æ—Ä–∏)
‚îú‚îÄ‚îÄ postcss.config.mjs             # PostCSS –ø–ª–∞–≥—ñ–Ω–∏ (Tailwind)
‚îú‚îÄ‚îÄ proxy.ts                       # Next.js 16 Proxy (—Ä–æ—É—Ç–∏–Ω–≥ –ª–æ–∫–∞–ª–µ–π —á–µ—Ä–µ–∑ next-intl, –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–∞ Edge)
‚îú‚îÄ‚îÄ tsconfig.json                  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è TypeScript (strict mode, path aliases)
‚îî‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É
```

---

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- **Node.js** 18+ 
- **npm** 9+ –∞–±–æ **pnpm**

### –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è

```bash
# 1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone <repository-url>
cd holywater-quiz-tt

# 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä (–∑ Turbopack)
npm run dev
```

–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é [http://localhost:3000](http://localhost:3000)

### –ó–±—ñ—Ä–∫–∞ –¥–ª—è Production
```bash
npm run build     # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ—ó production –∑–±—ñ—Ä–∫–∏
npm start         # –ó–∞–ø—É—Å–∫ production –∑–±—ñ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ
```

### –ó–∞–ø—É—Å–∫ –¢–µ—Å—Ç—ñ–≤
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤
npm run type-check      # TypeScript type checking

# Unit —Ç–µ—Å—Ç–∏ (Jest)
npm test                # –û–¥–∏–Ω –∑–∞–ø—É—Å–∫
npm run test:watch      # Watch mode –¥–ª—è TDD
npm run test:coverage   # –ó coverage –∑–≤—ñ—Ç–æ–º

# E2E —Ç–µ—Å—Ç–∏ (Playwright)
npm run test:e2e        # –ü–æ–≤–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–æ—Ä–æ–Ω–∫–∏
npm run test:e2e:ui     # UI —Ä–µ–∂–∏–º Playwright

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å–µ
npm run test:all        # Type check + lint + unit + e2e
```

---

## üé® –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –î–∏–∑–∞–π–Ω—É

### –ü–ª–∞–≤–Ω–∞ –¢–∏–ø–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∞ –°–∏—Å—Ç–µ–º–∞
–¢—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ñ —Ç–æ—á–∫–∏ (–Ω–∞–ø—Ä., `md:text-2xl`), —è–∫—ñ —Å–ø—Ä–∏—á–∏–Ω—è—é—Ç—å —Ä—ñ–∑–∫—ñ —Å—Ç—Ä–∏–±–∫–∏ —Ä–æ–∑–º—ñ—Ç–∫–∏. –¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î **–ø–ª–∞–≤–Ω—É (fluid) —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫—É** —á–µ—Ä–µ–∑ CSS `clamp()` –¥–ª—è –±–µ–∑—à–æ–≤–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è.

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –ü—ñ–¥—Ö—ñ–¥**:
```css
/* –§–æ—Ä–º—É–ª–∞: clamp(MIN, calc(INTERCEPT + SLOPE * 1vw), MAX) */

/* –ü—Ä–∏–∫–ª–∞–¥: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –≤—ñ–¥ 20px ‚Üí 32px –º—ñ–∂ viewport 320px-768px */
--fs-heading-lg: clamp(1.25rem, calc(0.714rem + 2.678vw), 2rem);

/* 
  –ü—Ä–∏ 320px viewport: 1.25rem (20px)
  –ü—Ä–∏ 544px viewport: 1.625rem (26px) ‚Üê –ø–ª–∞–≤–Ω–∞ —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è
  –ü—Ä–∏ 768px viewport: 2rem (32px)
  –ë—ñ–ª—å—à–µ 768px: –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è 2rem (clamp)
*/
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**:
- **0 CLS** (Cumulative Layout Shift) - –≤—ñ–¥—Å—É—Ç–Ω—ñ —Ä–∞–ø—Ç–æ–≤—ñ —Å—Ç—Ä–∏–±–∫–∏
- **–Ü–¥–µ–∞–ª—å–Ω–æ –Ω–∞ –ö–æ–∂–Ω–æ–º—É –ü—Ä–∏—Å—Ç—Ä–æ—ó** - –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç—ñ–≤, —Å–∫–ª–∞–¥–Ω–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ —Ç–æ—â–æ
- **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –Ω–∞—Ç–∏–≤–Ω—ñ CSS —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –Ω–∞ GPU (–±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç JavaScript)

–ü–æ–≤–Ω–∞ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—è –≤ [app/globals.css](app/globals.css#L42-L74).

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
–ö–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–≤—ñ–∑—É –¥–æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –ø—Ä–∏–Ω—Ü–∏–ø—É —î–¥–∏–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ:

- **QuestionRenderer** - –ù–∞–ø—Ä–∞–≤–ª—è—î –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø—É –ø–∏—Ç–∞–Ω–Ω—è (–æ–¥–∏–Ω–æ—á–Ω–∏–π/–º–Ω–æ–∂–∏–Ω–Ω–∏–π/–±—É–ª—å–±–∞—à–∫–∏)
- **ProgressBar** - –í—ñ–∑—É–∞–ª—å–Ω–∏–π –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫ (–ø—Ä–æ–≥—Ä–µ—Å 1/5)
- **CircularLoader** - SVG –∞–Ω—ñ–º–∞—Ü—ñ—è –∑ –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è–º GPU
- **BubbleOptions** - –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–∞–≤–Ω–æ—ó –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

---

## üîê –ë–µ–∑–ø–µ–∫–∞

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –õ–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ, –≤–∏–¥–∏–º—ñ –≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞.  
**–†—ñ—à–µ–Ω–Ω—è**: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö (email) —á–µ—Ä–µ–∑ AES-GCM –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º.

**–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**:
```mermaid
graph TB
    A[üë§ User Input<br/>Email] -->|–í–≤–µ–¥–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö| B[üîê encrypt email]
    
    B --> C1[Generate IV<br/>random]
    B --> C2[Fetch session key]
    B --> C3[AES-GCM encryption]
    
    C1 --> D[üíæ localStorage<br/>encrypted]
    C2 --> D
    C3 --> D
    
    D -->|–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ| E["üîí ZX4jK...9mQ==<br/>cipher —Ç–µ–∫—Å—Ç"]
    
    style A fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style B fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style D fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style E fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    
    subgraph "Session Key Lifecycle"
        SK1[üîë –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É<br/>–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–≤—ñ–∑—É]
        SK2[üíº –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É<br/>sessionStorage]
        SK3[üóëÔ∏è –ó–Ω–∏—â—É—î—Ç—å—Å—è –ø—Ä–∏<br/>–∑–∞–∫—Ä–∏—Ç—Ç—ñ –≤–∫–ª–∞–¥–∫–∏]
        SK1 --> SK2 --> SK3
    end
    
    style SK1 fill:#fce4ec,stroke:#c2185b
    style SK2 fill:#fce4ec,stroke:#c2185b
    style SK3 fill:#fce4ec,stroke:#c2185b
```

**–ß–æ–º—É AES-GCM?**
- ‚úÖ –Ü–Ω–¥—É—Å—Ç—Ä—ñ–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (–∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ NIST)
- ‚úÖ **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–µ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è** (–≤–∫–ª—é—á–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ)
- ‚úÖ –í–∏—è–≤–ª—è—î –ø—ñ–¥–º—ñ–Ω—É (—è–∫—â–æ –¥–∞–Ω—ñ –∑–º—ñ–Ω–µ–Ω–æ, –¥–µ—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –Ω–µ —Å–ø—Ä–∞—Ü—é—î)

**–î–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó**: [src/lib/crypto.ts](src/lib/crypto.ts)

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ë–µ–∑–ø–µ–∫–∏
–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ñ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–∏–º –∞—Ç–∞–∫–∞–º:

```typescript
// next.config.ts
Content-Security-Policy: 
  - –ë–ª–æ–∫—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ XSS)
  - –û–±–º–µ–∂—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
  - frame-ancestors 'none' (–∑–∞–ø–æ–±—ñ–≥–∞—î –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—é)

X-Frame-Options: DENY
  - –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ clickjacking

X-Content-Type-Options: nosniff
  - –ó–∞–ø–æ–±—ñ–≥–∞—î –∞—Ç–∞–∫–∞–º –ø—ñ–¥–º—ñ–Ω–∏ MIME-—Ç–∏–ø—É

Referrer-Policy: strict-origin-when-cross-origin
  - –û–±–º–µ–∂—É—î –≤–∏—Ç—ñ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
```

---

## üìä –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü–æ—Ç–æ–∫—É –î–∞–Ω–∏—Ö

```mermaid
graph TB
    A[User Input Email] -->|Input| B[Encrypt Email]
    
    B --> C1[Generate Random IV]
    B --> C2[Fetch Session Key]
    B --> C3[AES-GCM Encryption]
    
    C1 --> D[localStorage Encrypted]
    C2 --> D
    C3 --> D
    
    D -->|Encrypted| E[Cipher Text]
    
    style A fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style B fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style D fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style E fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    
    subgraph SessionKey[Session Key Lifecycle]
        SK1[Generated on Quiz Init]
        SK2[Stored in sessionStorage]
        SK3[Destroyed on Tab Close]
        SK1 --> SK2 --> SK3
    end
    
    style SK1 fill:#fce4ec,stroke:#c2185b
    style SK2 fill:#fce4ec,stroke:#c2185b
    style SK3 fill:#fce4ec,stroke:#c2185b
```

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –°—Ç–∞–Ω—É
```typescript
// –ü—Ä–æ–º—ñ–∂–Ω–∏–π —à–∞—Ä –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è Zustand + –≤–ª–∞—Å–Ω–µ —Å—Ö–æ–≤–∏—â–µ
persist(
  (set, get) => ({ /* —Å—Ç–∞–Ω –∫–≤—ñ–∑—É */ }),
  {
    name: 'quiz-storage',
    storage: createJSONStorage(() => ({
      getItem: (key) => getSecure(key, { decrypt: true }),
      setItem: (key, value) => setSecure(key, value, { 
        ttl: TTL.ONE_WEEK,
        encrypt: key === 'email' 
      }),
      removeItem: (key) => removeSecure(key)
    }))
  }
)
```

**–ß–æ–º—É –¶–µ–π –ü—ñ–¥—Ö—ñ–¥?**
- ‚úÖ **URL –ö–µ—Ä—É—î –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**: –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ /quiz/3 ‚Üí –ø—Ä–æ–¥–æ–≤–∂—É—î –∑ –∫—Ä–æ–∫—É 3
- ‚úÖ **–°—Ö–æ–≤–∏—â–µ –ö–µ—à—É—î –í—ñ–¥–ø–æ–≤—ñ–¥—ñ**: –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –ø–µ—Ä–µ—á–∏—Ç—É–≤–∞—Ç–∏ –∑ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ß–∞—Å –ñ–∏—Ç—Ç—è**: –î–∞–Ω—ñ –∑–Ω–∏–∫–∞—é—Ç—å —á–µ—Ä–µ–∑ 7 –¥–Ω—ñ–≤ (–∑–∞–ø–æ–±—ñ–≥–∞—î –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º –¥–∞–Ω–∏–º)

---

## üí° –í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω—ñ Best Practices

### 1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–µ—Ä–≤–µ—Ä-–ü–µ—Ä—à–∏–π
**–ü–∞—Ç–µ—Ä–Ω**: –°–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ - —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ
```tsx
// ‚úÖ –î–æ–±—Ä–µ: –°–µ—Ä–≤–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
export default async function QuizStepPage({ params }) {
  const { step } = await params;
  // –°—Ç–∞—Ç–∏—á–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –ø–æ—à—É–∫–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º
}

// ‚úÖ –î–æ–±—Ä–µ: –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ)
"use client";
export const BubbleOptions = ({ options, onToggle }) => {
  // –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞, –ø–æ—Ç—Ä–µ–±—É—î –±—Ä–∞—É–∑–µ—Ä–Ω—ñ API
}
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**: 40% –º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä JavaScript, —à–≤–∏–¥—à–µ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

### 2. –ü–æ—Å—Ç—É–ø–æ–≤–µ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è
**–ü–∞—Ç–µ—Ä–Ω**: –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø—Ä–∞—Ü—é—î –±–µ–∑ JavaScript
- ‚úÖ URL - —Ä–µ–∞–ª—å–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ (–º–æ–∂–Ω–∞ –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è, –¥–æ–¥–∞—Ç–∏ –≤ –∑–∞–∫–ª–∞–¥–∫–∏)
- ‚úÖ –§–æ—Ä–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –Ω–∞—Ç–∏–≤–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —è–∫ –∑–∞–ø–∞—Å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç
- ‚úÖ CSS –∞–Ω—ñ–º–∞—Ü—ñ—ó –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—ñ–¥—Ä–∞—Ü—ñ—ó

### 3. –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π HTML (`<button>`, `<input>`, `<label>`)
- ‚úÖ ARIA –º—ñ—Ç–∫–∏ –¥–ª—è –µ–∫—Ä–∞–Ω–Ω–∏—Ö —á–∏—Ç–∞—á—ñ–≤
- ‚úÖ –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è (Tab, Enter, Escape)
- ‚úÖ –í–∏–¥–∏–º—ñ —Å—Ç–∞–Ω–∏ —Ñ–æ–∫—É—Å—É
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞—Å—Ç –∫–æ–ª—å–æ—Ä—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î WCAG AA (—Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è 4.5:1)

### 4. –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω—ñ—Å—Ç—å
**–ü–∞—Ç–µ—Ä–Ω**: –°–µ—Ä–≤–µ—Ä–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –∑ –º–æ–≤–æ—é –Ω–∞ –æ—Å–Ω–æ–≤—ñ URL
```
/en/quiz/1 ‚Üí –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞
/fr/quiz/1 ‚Üí –§—Ä–∞–Ω—Ü—É–∑—å–∫–∞
/de/quiz/1 ‚Üí –ù—ñ–º–µ—Ü—å–∫–∞
/es/quiz/1 ‚Üí –Ü—Å–ø–∞–Ω—Å—å–∫–∞
```

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
```tsx
// messages/en.json
{
  "EmailStep": {
    "title": "What is your email address?",
    "placeholder": "Enter your email"
  }
}

// app/[locale]/quiz/email/page.tsx
const t = useTranslations('EmailStep');
<h1>{t('title')}</h1>
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –§–∞–π–ª–∏

| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|------|--------|
| `next.config.ts` | –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏, –ø–ª–∞–≥—ñ–Ω –±–∞–≥–∞—Ç–æ–º–æ–≤–Ω–æ—Å—Ç—ñ, –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É |
| `tsconfig.json` | –°—Ç—Ä–æ–≥—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è TypeScript, –ø—Å–µ–≤–¥–æ–Ω—ñ–º–∏ —à–ª—è—Ö—ñ–≤ |
| `tailwind.config.js` | –í–ª–∞—Å–Ω—ñ —Ç–æ–∫–µ–Ω–∏ —Ç–µ–º–∏ (—á–µ—Ä–µ–∑ –¥–∏—Ä–µ–∫—Ç–∏–≤—É `@theme` –≤ Tailwind v4) |
| `playwright.config.ts` | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –Ω–∞—Å–∫—Ä—ñ–∑–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ (–±—Ä–∞—É–∑–µ—Ä–∏, –ø–æ–≤—Ç–æ—Ä–∏, –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—è) |
| `jest.config.js` | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—å–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ (—Å–µ—Ä–µ–¥–æ–≤–∏—â–µ jsdom, —ñ–º—ñ—Ç–∞—Ü—ñ—è –º–æ–¥—É–ª—ñ–≤) |
| `eslint.config.mjs` | –ü—Ä–∞–≤–∏–ª–∞ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Next.js + TypeScript) |

---

## üìù –î–ª—è –†–µ–≤'—é–≤–µ—Ä—ñ–≤

### –ö–ª—é—á–æ–≤—ñ –ú–æ–º–µ–Ω—Ç–∏ –¥–ª—è –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏

**üîê –ë–µ–∑–ø–µ–∫–∞**:
- [src/lib/crypto.ts](src/lib/crypto.ts) - AES-GCM —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è email (Web Crypto API)
- [next.config.ts](next.config.ts#L8-L38) - CSP —Ç–∞ security headers

**‚ö° –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**:
- [app/globals.css](app/globals.css#L42-L74) - Fluid —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫–∞ –∑ `clamp()` (zero CLS)
- –°–µ—Ä–≤–µ—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π JavaScript –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ)

**üß™ –¢–µ—Å—Ç–∏**:
```bash
# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
npm run type-check      # TypeScript –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤
npm test                # 6 unit —Ç–µ—Å—Ç—ñ–≤ (crypto, storage, CSV)
npm run test:coverage   # Unit —Ç–µ—Å—Ç–∏ –∑ coverage –∑–≤—ñ—Ç–æ–º
npm run test:e2e        # 2 E2E —Å—Ü–µ–Ω–∞—Ä—ñ—ó (–æ—Å–Ω–æ–≤–Ω–∏–π + –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å)

# –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó –≤—ñ–¥–ª–∞–¥–∫–∏
npm run test:watch      # Unit —Ç–µ—Å—Ç–∏ –≤ watch —Ä–µ–∂–∏–º—ñ
npm run test:e2e:ui     # Playwright UI —Ä–µ–∂–∏–º (—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –≤—ñ–¥–ª–∞–¥–∫–∞)

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å–µ –æ–¥—Ä–∞–∑—É
npm run test:all        # Type check + lint + unit + e2e
```

**üåç i18n**:
- URL-based —Ä–æ—É—Ç–∏–Ω–≥: `/en/quiz/1`, `/fr/quiz/1`, `/de/quiz/1`, `/es/quiz/1`
- 4 –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω—ñ –ª–æ–∫–∞–ª—ñ

**üíæ –°—Ç–∞–Ω**:
- Zustand store –∑ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—é ([useQuizStore.ts](src/lib/store/useQuizStore.ts))
- TTL 7 –¥–Ω—ñ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è

---
